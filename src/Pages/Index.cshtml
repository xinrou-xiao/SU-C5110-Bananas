@page
@using ContosoCrafts.WebSite.Components
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<!-- Banner Carousel Section: A slideshow of anime banners that automatically cycles -->
<div id="animeCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators for switching between banners -->
    <!-- Each 'li' represents an indicator dot for a specific slide (0-3) -->
    <ol class="carousel-indicators">
        <li data-target="#animeCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#animeCarousel" data-slide-to="1"></li>
        <li data-target="#animeCarousel" data-slide-to="2"></li>
        <li data-target="#animeCarousel" data-slide-to="3"></li>
    </ol>

    <!-- Carousel inner container holding the banners -->
    <!-- Each 'carousel-item' represents a different banner in the slideshow -->
    <div class="carousel-inner">

        <!-- First banner -->
        <!-- 'active' class sets this as the default banner displayed first -->
        <div class="carousel-item active">
            <img class="d-block w-100" src="/Images/Banner_1.png" alt="First slide">
            <div class="carousel-caption d-none d-md-block">
                <h5>Jujutsu Kaisen</h5>
                <p>Yuji Itadori enters the dangerous world of curses after consuming a powerful cursed object, facing dark forces alongside skilled Jujutsu sorcerers.</p>
            </div>
        </div>

        <!-- Second banner -->
        <!-- This slide will appear after the first banner either through auto-rotation or manual control -->
        <div class="carousel-item">
            <img class="d-block w-100" src="/Images/Banner_2.png" alt="Second slide">
            <div class="carousel-caption d-none d-md-block">
                <h5>Blue Lock</h5>
                <p>In a quest to create Japan's ultimate striker, elite players compete in a cutthroat training facility, where only the strongest survive to claim their spot on the national team.</p>
            </div>
        </div>

        <!-- Third banner -->
        <div class="carousel-item">
            <img class="d-block w-100" src="/Images/Banner_3.png" alt="Third slide">
            <!-- Caption overlay on top of the image -->
            <div class="carousel-caption d-none d-md-block">
                <h5>Demon Slayer</h5>
                <p>Witness the rise of Tanjiro as he joins the Demon Slayer Corps, facing terrifying foes while uncovering the mysteries of the demon world</p>
            </div>
        </div>

        <!-- Fourth banner -->
        <div class="carousel-item">
            <img class="d-block w-100" src="/Images/Banner_4.png" alt="Fourth slide">
            <div class="carousel-caption d-none d-md-block">
                <h5>Haikyuu!!</h5>
                <p>An exhilarating journey of underdogs rising to the top—volleyball is more than just a game for Hinata and his team</p>
            </div>
        </div>
    </div>

    <!-- Navigation Controls: Allow users to move between banners -->
    <!-- Previous slide button -->
    <a class="carousel-control-prev" href="#animeCarousel" role="button" data-slide="prev">
        <!-- Icon for the previous button (left arrow) -->
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>

    <!-- Next slide button -->
    <a class="carousel-control-next" href="#animeCarousel" role="button" data-slide="next">
        <!-- Icon for the next button (right arrow) -->
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<!-- Audio Element for Background Music -->
<audio id="bg-music" autoplay loop>
    <!-- Specifying the path and type of audio file -->
    <source src="Audio/Warrior.mp3" type="audio/mp3">
    <!-- Fallback message for browsers that do not support the audio element -->
    Your browser does not support the audio element.
</audio>

<!-- Music Controls for Play/Pause and Next Song -->
<div id="audio-controls">
    <i class="fas fa-play" onclick="toggleAudio()" id="play-pause-icon"></i> <!-- Play/Pause Icon -->
    <span id="music-label">Music</span>
    <i class="fas fa-forward" onclick="nextSong()" id="next-song-icon"></i> <!-- Next Song Icon -->
</div>

<!-- Floating Display for Current Song Name -->
<div id="song-name-display" style="position: fixed; bottom: 10px; right: 10px; background-color: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 5px; display: none;">
    <i class="fas fa-music"></i> <!-- Music Icon -->
    <!-- Element to Show Song Name -->
    <span id="song-name"></span>
</div>

<!--JavaScript for Audio Control and Display Logic-->
<script>const bgMusic = document.getElementById('bg-music'); // Audio element reference
    const playPauseIcon = document.getElementById('play-pause-icon'); // Play/Pause icon reference
    const songNameDisplay = document.getElementById('song-name-display'); // Song name display reference
    const songNameText = document.getElementById('song-name'); // Text element for song name
    let currentSongIndex = 0; // Track the currently playing song index

    // List of songs with their file paths and names
    const songs = [
        { src: "Audio/Warrior.mp3", name: "Warrior" },
        { src: "Audio/Dragon Castle.mp3", name: "Dragon Castle" },
        { src: "Audio/Peach House.mp3", name: "Peach House" },
        { src: "Audio/kamado_tanjiro_no_uta.mp3", name: "Tanjiro" },
        { src: "Audio/Yugen.mp3", name: "Yugen" }
    ];

    // Load the selected song and update display
    function loadSong(index) {
        bgMusic.src = songs[index].src; // Update audio source
        songNameText.textContent = songs[index].name; // Update displayed song name
        songNameDisplay.style.display = 'block'; // Show song name display
        bgMusic.play(); // Start playing the song
        updatePlayPauseIcon(); // Update play/pause icon
    }

    // Toggle play and pause functionality
    function toggleAudio() {
        if (bgMusic.paused) {
            bgMusic.play(); // Play the music if paused
            playPauseIcon.classList.remove('fa-play'); // Change icon to pause
            playPauseIcon.classList.add('fa-pause');
        } else {
            bgMusic.pause(); // Pause the music if playing
            playPauseIcon.classList.remove('fa-pause'); // Change icon to play
            playPauseIcon.classList.add('fa-play');
        }
    }

    // Move to the next song in the playlist
    function nextSong() {
        currentSongIndex = (currentSongIndex + 1) % songs.length; // Cycle through songs
        loadSong(currentSongIndex); // Load the next song
    }

    // Update play/pause icon based on the audio state
    function updatePlayPauseIcon() {
        playPauseIcon.classList.remove('fa-play', 'fa-pause'); // Remove old icon
        playPauseIcon.classList.add(bgMusic.paused ? 'fa-play' : 'fa-pause'); // Add new icon
    }

    // Load the first song on initial page load
    loadSong(currentSongIndex);

</script>

<h1 style="color: white;">Banime</h1>
@(await Html.RenderComponentAsync<ProductList>(RenderMode.ServerPrerendered))

<script src="_framework/blazor.server.js"></script>