@page "{id}"
@using ContosoCrafts.WebSite.Services
@using ContosoCrafts.WebSite.Models
@inject JsonFileProductService ProductService
@model ContosoCrafts.WebSite.Pages.Product.DeleteModel
@{
    // Set the page title
    ViewData["Title"] = "Delete Anime";
}

<!-- Breadcrumb navigation for better user experience -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb" style="background: none; color: white;">
        <li class="breadcrumb-item"><a href="/Index" style="color: white;">Home</a></li>
        <li class="breadcrumb-item"><a href="/Product" style="color: white;">Admin</a></li>
        <li class="breadcrumb-item active" aria-current="page">Delete</li>
    </ol>
</nav>

<div class="container white-font">
    <h2>Delete Anime Information</h2>

    <!-- Check if the product exists -->
    @if (Model.Product ==null)
    {
        <h5>Sorry, the data you are trying to access does not exist.</h5>
        return; // Stop rendering the page if the product is
    }

 <!-- Form for deleting the product -->
    <form id="deleteForm" method="post">
        <!-- Hidden fields to pass product data -->
        <input type="hidden" asp-for="Product.Id" />
        @Html.HiddenFor(x => x.Product.Id)
        <input type="hidden" asp-for="Product.Maker" />

        <!-- Display the product title -->
        <div class="form-group">
            <label class="white-font" asp-for="Product.Title">Title</label>
            <input asp-for="Product.Title" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Description">Description</label>
            <textarea asp-for="Product.Description" class="form-control" readonly></textarea>
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Url">URL</label>
            <input asp-for="Product.Url" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Image">Image URL</label>
            <input asp-for="Product.Image" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Release">Release Year</label>
            <input asp-for="Product.Release" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Trailer">Trailer URL</label>
            <input asp-for="Product.Trailer" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Season">Season</label>
            <input asp-for="Product.Season" type="number" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Banner">Banner URL</label>
            <input asp-for="Product.Banner" class="form-control" readonly />
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Genre">Genre</label>
            @foreach (var genre in Model.Product.Genre)
            {
                <div class="form-group">
                    <input class="margin-bottom form-control" asp-for="Product.Genre" value="@genre" readonly />
                </div>
            }
        </div>

        <div class="form-group">
            <label class="white-font" asp-for="Product.Genre">OTT platform</label>
            <div>
                @foreach (OttTypeEnum platform in Model.Product.Ott)
                {
                    if (platform != 0)
                    {
                        <a href="@platform.GetUrl()" target="_blank">
                            <img class="OTT-Icon" src="@platform.GetIcon()" alt="@platform">
                        </a>
                    }
                }
            </div>
        </div>

        <button type="submit" class="btn delete-btn">Delete</button>
        <a asp-page="/Product/Index" class="btn btn-secondary">Cancel</a>
    </form>
</div>

@section Scripts {
    <script>
        function redirectToIndex() {
            // After form submission, redirect to the Index page
            window.location.href = '@Url.Page("/Product/Index")';
        }
    </script>
}